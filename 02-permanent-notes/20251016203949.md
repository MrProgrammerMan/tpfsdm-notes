---
title: callPackage
id: 20251016203959
tags: [nix, packaging, functions, modularity]
---
# callPackage
`callPackage` is a Nix function used to simplify the import of Nix expressions and their dependencies. It automatically supplies required arguments to a Nix function by looking them up in a given scope, usually from an overlay or `pkgs` set. This helps in creating modular, reusable, and maintainable Nix expressions.

## Key Points

- **Automatic Dependency Injection**: `callPackage` inspects the parameters of the function it calls and provides arguments from the supplied attribute set.
- **Modularity**: Makes it easier to organize packages and expressions into separate files without manually passing every dependency.
- **Common Usage**: Typically used in `default.nix` or overlays to import other Nix expressions with all dependencies wired up.

## Example
```nix
# myPackage.nix
{ stdenv, fetchurl }:
stdenv.mkDerivation {
  name = "my-package";
  src = fetchurl {
    url = "https://example.com/source.tar.gz";
    sha256 = "0000000000000000000000000000000000000000000000000000";
  };
}
```

```nix
# default.nix
let
  pkgs = import <nixpkgs> {};
in
pkgs.callPackage ./myPackage.nix {}
```

In this example, `callPackage` automatically provides `stdenv` and `fetchurl` from `pkgs` to `myPackage.nix`.

## Notes
- `callPackage` is widely used in Nixpkgs to reduce boilerplate.
- Dependencies not present in the scope must be explicitly passed.
- Often combined with overlays for advanced package customization.

## Flake
```nix
{
  description = "A simple flake exposing myPackage";

  inputs.nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
  
  outputs = { self, nixpkgs }: 
    let
      pkgs = import nixpkgs { system = "x86_64-linux"; };
    in {
      packages.x86_64-linux.myPackage = pkgs.callPackage ./myPackage.nix {};
    };
}
```